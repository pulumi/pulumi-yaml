# Changelog
All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html),
and is generated by [Changie](https://github.com/miniscruff/changie).

## v1.21.4 - 2025-07-31

### Bug Fixes

- [codegen] Downgrade go.mod to 1.23.11 for tfbridge compat [#849](https://github.com/pulumi/pulumi-yaml/pull/849)

## v1.21.3 - 2025-07-23

### Bug Fixes

- [runtime] Fix registering explicit providers for parameterised packages [#841](https://github.com/pulumi/pulumi-yaml/pull/841)

- [runtime] Always set a version for component schemas for `package add` [#842](https://github.com/pulumi/pulumi-yaml/pull/842)

## v1.21.2 - 2025-07-14

### Bug Fixes

- [docs] Fix YAML AMI lookups [#829](https://github.com/pulumi/pulumi-yaml/pull/829)

## v1.21.1 - 2025-06-18

### Bug Fixes

- [runtime] Give a better error message when an object key is not a string, instead of panic'ing [#816](https://github.com/pulumi/pulumi-yaml/pull/816)

- [convert] Show diagnostics properly when generating the program fails [#820](https://github.com/pulumi/pulumi-yaml/pull/820)

## v1.21.0 - 2025-06-12

### Improvements

- [runtime] Update pulumi/pulumi to 3.176.0 [#817](https://github.com/pulumi/pulumi-yaml/pull/817)

## v1.20.0 - 2025-06-11

### Improvements

- [runtime] Allow indexing into `any` types [#809](https://github.com/pulumi/pulumi-yaml/pull/809)

## v1.19.2 - 2025-06-04

### Bug Fixes

- [runtime] Use self-driven type casting for config rather than relying on the engine [#807](https://github.com/pulumi/pulumi-yaml/pull/807)

## v1.19.1 - 2025-05-21

### Bug Fixes

- [convert] Fix LoadTemplate resolving the project directory to . on windows [#801](https://github.com/pulumi/pulumi-yaml/pull/801)

## v1.19.0 - 2025-05-07

### Improvements

- [runtime] Use Go 1.24 [#787](https://github.com/pulumi/pulumi-yaml/pull/787)

- [runtime] Update to golangci-lint 1.64.2 [#788](https://github.com/pulumi/pulumi-yaml/pull/788)

## v1.18.0 - 2025-04-30

### Improvements

- [codegen] Add import support to resource options [#775](https://github.com/pulumi/pulumi-yaml/pull/775)

## v1.17.0 - 2025-04-24

### Improvements

- [runtime] Make setting resource properties using an object variables possible [#779](https://github.com/pulumi/pulumi-yaml/pull/779)

### Bug Fixes

- [runtime] Use PluginDownloadURL resource option correctly when loading plugins [#776](https://github.com/pulumi/pulumi-yaml/pull/776)

## v1.16.0 - 2025-04-08

### Improvements

- [runtime] Update pulumi/pulumi to 3.160.0 [#773](https://github.com/pulumi/pulumi-yaml/pull/773)

## v1.15.2 - 2025-04-08

### Bug Fixes

- [runtime] Allow default values for integer config [#771](https://github.com/pulumi/pulumi-yaml/pull/771)

## v1.15.1 - 2025-03-26

### Bug Fixes

- [runtime] Load tagged plugins correctly [#768](https://github.com/pulumi/pulumi-yaml/pull/768)

## v1.15.0 - 2025-03-24

### Improvements

- [runtime] Allow authoring components in YAML [#749](https://github.com/pulumi/pulumi-yaml/pull/749)

- [runtime] Support the packages Pulumi.yaml section in YAML runtime [#758](https://github.com/pulumi/pulumi-yaml/pull/758)

- [runtime] Allow setting the namespace for components [#759](https://github.com/pulumi/pulumi-yaml/pull/759)

### Bug Fixes

- [runtime] Correct provider type for Git plugins in state [#761](https://github.com/pulumi/pulumi-yaml/pull/761)

## v1.14.1 - 2025-03-06

### Bug Fixes

- [runtime] Fix package name passed to the engine [#734](https://github.com/pulumi/pulumi-yaml/pull/734)

## v1.14.0 - 2025-03-06

### Improvements

- [codegen] Add rootDirectory to codegen, runtime, and convert [#716](https://github.com/pulumi/pulumi-yaml/pull/716)

## v1.13.1 - 2025-02-06

### Bug Fixes

- [runtime] Don't parse runtime options at startup, defer to the options sent for specific methods [#451](https://github.com/pulumi/pulumi-yaml/pull/451)

## v1.13.0 - 2024-12-17

### Improvements

- [runtime] Allow specifying dependencies for output invokes [#693](https://github.com/pulumi/pulumi-yaml/pull/693)

- [runtime] Update to pulumi v3.143.0 [#700](https://github.com/pulumi/pulumi-yaml/pull/700)

### Bug Fixes

- [runtime] Fix the language plugin to return a version [#682](https://github.com/pulumi/pulumi-yaml/pull/682)

- [runtime] Fix a mixup between package names and plugin names when listing required plugins [#688](https://github.com/pulumi/pulumi-yaml/pull/688)

- [runtime] Resource properties marked as secret in schema are now sent as secrets [#698](https://github.com/pulumi/pulumi-yaml/pull/698)

- [convert] Emit invoke options to PCL when ejecting YAML templates [#697](https://github.com/pulumi/pulumi-yaml/pull/697)

## v1.12.0 - 2024-11-19

### Improvements

- [codegen] Generate invoke options from PCL [#678](https://github.com/pulumi/pulumi-yaml/pull/678)

- [codegen] Support stack references in program generation [#686](https://github.com/pulumi/pulumi-yaml/pull/686)

### Bug Fixes

- [codegen] Program generation now respects the 'main' option from input Pulumi.yaml [#672](https://github.com/pulumi/pulumi-yaml/pull/672)

- [codegen] Maintain empty strings in converted programs to still be string literals in YAML [#675](https://github.com/pulumi/pulumi-yaml/pull/675)

- [codegen] Recognize the PCL fn::secret function [#683](https://github.com/pulumi/pulumi-yaml/pull/683)

- [codegen] Fix casing of `dependsOn` and `ignoreChanges` in program generation [#690](https://github.com/pulumi/pulumi-yaml/pull/690)

### Improvements

- [runtime] `GetProgramDependencies` now returns packages used to show in `pulumi about` [#676](https://github.com/pulumi/pulumi-yaml/pull/676)

- [runtime] Pass asset and archive paths as is to the engine [#684](https://github.com/pulumi/pulumi-yaml/pull/684)

### Bug Fixes

- [runtime] Fix panic when resource shape is invalid [#677](https://github.com/pulumi/pulumi-yaml/pull/677)

## v1.11.2 - 2024-10-29

### Bug Fixes

- [runtime] Fix potential panic when using fn::secret on a resource [#664](https://github.com/pulumi/pulumi-yaml/pull/664)

- [runtime] Invalid YAML files no longer cause package detection to fail. [#666](https://github.com/pulumi/pulumi-yaml/pull/666)

## v1.11.1 - 2024-10-10

### Bug Fixes

- [runtime] Revert go version in go.mod back to 1.21 [#662](https://github.com/pulumi/pulumi-yaml/pull/662)

## v1.11.0 - 2024-10-08

### Improvements

- [runtime] Update go version for GitHub workflows [#647](https://github.com/pulumi/pulumi-yaml/pull/647)

- [runtime] Support for parameterized providers [#616](https://github.com/pulumi/pulumi-yaml/pull/616)

### Bug Fixes

- [runtime] Fix default component detection when declared later in file [#652](https://github.com/pulumi/pulumi-yaml/pull/652)

- [runtime] Build statically linked release binary with CGO disabled [#657](https://github.com/pulumi/pulumi-yaml/pull/657)

## v1.10.3 - 2024-09-19

## v1.10.2 - 2024-09-19

### Bug Fixes

- [codegen] Fix GenerateProgram not using the Strict flag [#635](https://github.com/pulumi/pulumi-yaml/pull/635)

## v1.10.1 - 2024-09-17

### Bug Fixes

- [codegen] Add support for the stack, project, and organization builtins [#625](https://github.com/pulumi/pulumi-yaml/pull/625)

- [runtime] Fix handling invokes that error out when the response contains secrets [#619](https://github.com/pulumi/pulumi-yaml/pull/619)

## 1.10.0 (2024-09-04)

### Improvements

- Add "pulumi.organization" to the built-in "pulumi" variable to obtain the current organization [#613](https://github.com/pulumi/pulumi-yaml/pull/613)

### Bug Fixes

- Parse the items property on config type declarations to prevent diagnostic messages about
  unknown fields [#615](https://github.com/pulumi/pulumi-yaml/pull/615)

- Fix usage of local plugins (those defined in the Pulumi.yaml file plugins section) [#619](https://github.com/pulumi/pulumi-yaml/pull/619)

- Allow missing nodes in template to enable walking templates without config
  [#617](https://github.com/pulumi/pulumi-yaml/pull/617)


## 1.9.2 (2024-08-09)

### Bug Fixes

- Fix a panic when the compiler doesn't include the name attribute from the Pulumi.yaml.
  [#610](https://github.com/pulumi/pulumi-yaml/pull/610)

## 1.9.1 (2024-07-11)

### Bug Fixes

- Fix Stack Reference output properties to be usable as any type, not only strings inputs.
  [#600](https://github.com/pulumi/pulumi-yaml/pull/600)

## 1.9.0 (2024-06-26)

### Improvements

- Update pulumi/pulumi to v3.121.0.

### Bug Fixes

- When importing, don't error on ID expressions that are themselves unknown during preview.
  [#591](https://github.com/pulumi/pulumi-yaml/pull/591)

## 1.8.0 (2024-06-05)

- Pass `PULUMI_STACK`, `PULUMI_ORGANIZATION`, `PULUMI_PROJECT` and `PULUMI_CONFIG` as environment variable to compiler process.
  [#578](https://github.com/pulumi/pulumi-yaml/pull/578)

## 1.7.0 (2024-04-29)

### Improvements

- Allow the `Resource.get.id` field to be dynamically set.
 [#563](https://github.com/pulumi/pulumi-yaml/pull/563)

- Upgrade pulumi dependency to the latest version.
 [#566](https://github.com/pulumi/pulumi-yaml/pull/566), [#571](https://github.com/pulumi/pulumi-yaml/pull/571)

### Bug Fixes

- Support negative literals [#565](https://github.com/pulumi/pulumi-yaml/pull/565)

## 1.6.0 (2024-03-11)

### Improvements

- Support (logical) name for resources and config variables
 [#546](https://github.com/pulumi/pulumi-yaml/pull/546)

- Update pulumi/pulumi to v3.109.0

- Support [PULUMI_DEBUG_PROVIDERS](https://www.pulumi.com/docs/using-pulumi/pulumi-packages/debugging-provider-packages/)

## 1.5.0 (2024-01-22)

### Improvements

- Support (logical) name for resources and config variables
  [#546](https://github.com/pulumi/pulumi-yaml/pull/546)

## 1.4.5 (2023-12-27)

### Improvements

- Update pulumi/pulumi to v3.99.0.

## 1.4.4 (2023-12-18)

### Bug Fixes

- Apply aliases from schema.
  [#533](https://github.com/pulumi/pulumi-yaml/pull/533)

## 1.4.3 (2023-11-29)

### Bug Fixes

- Fixes StackReference resources so that they are always read.
  [#529](https://github.com/pulumi/pulumi-yaml/pull/529)

## 1.4.2 (2023-11-17)

### Bug Fixes

- Fields marked as secret in the provider schema are now correctly
  handled as secrets. [#526](https://github.com/pulumi/pulumi-yaml/pull/526)

## 1.4.1 (2023-11-10)

### Bug Fixes

- Fix a regression where secret values were not handled correctly.
  [#519](https://github.com/pulumi/pulumi-yaml/pull/519)

## 1.4.0 (2023-10-27)

### Improvements

- Update pulumi/pulumi to v3.78.1
  [#493](https://github.com/pulumi/pulumi-yaml/pull/493)

- Publish pulumi-converter-yaml.

- Plugins: clean up resources and exit cleanly on receiving SIGINT or CTRL_BREAK.

- Improve handling of types of config fields.

### Bug Fixes

- Allow `protect` resource option to be set dynamically.


## 1.3.0 (2023-08-29)

### Improvements

- Update pulumi/pulumi to v3.78.1
  [#493](https://github.com/pulumi/pulumi-yaml/pull/493)

- Publish pulumi-converter-yaml.

- Plugins: clean up resources and exit cleanly on receiving SIGINT or CTRL_BREAK.

## 1.2.1 (2023-08-10)

### Bug Fixes

- Return a useful error message when a resource does not have a 'type' field
  specified, rather than a panic.
  [#468](https://github.com/pulumi/pulumi-yaml/pull/468)

- Fix nested access of unknown properties.
  [#490](https://github.com/pulumi/pulumi-yaml/pull/490)

## 1.2.0 (2023-08-08)

### Improvements

- Pre-built binaries of pulumi-language-yaml are now built with Go 1.20.
- Upgrade to Pulumi v3.76.
- Fix unknown resource outputs causing the program to fail during preview.

## 1.1.0 (2023-04-06)

### Improvements

- Add support for the `deletedWith` resource option.
  [#437](https://github.com/pulumi/pulumi-yaml/pull/437)

### Bug Fixes

- Avoid panicing for non-string map keys
  [#428](https://github.com/pulumi/pulumi-yaml/pull/428)

## 1.0.4 (2022-12-07)

### Improvements

- Deprecate `fn::stackReference`.
  [#420](https://github.com/pulumi/pulumi-yaml/pull/420)

- Ensure resource and invoke option "version" is used in package resolution, enabling Docker v4
  provider `docker:Image` resource.
  [#423](https://github.com/pulumi/pulumi-yaml/pull/423)

## 1.0.3 (2022-11-17)

### Improvements

- Parse `config` block for `pulumi convert`.
  [#407](https://github.com/pulumi/pulumi-yaml/pull/407)

### Bug Fixes

## 1.0.2 (2022-11-08)

### Improvements

### Bug Fixes

- Do not error on duplicate config keys.
  [#402](https://github.com/pulumi/pulumi-yaml/pull/402)

## 1.0.1 (2022-11-02)

### Improvements

- Allow ejecting when relying on `config` nodes.
  [#393](https://github.com/pulumi/pulumi-yaml/pull/393)

## 1.0.0 (2022-11-02)

### Improvements

- Ensure that constant values passed to enums are valid.
  [#357](https://github.com/pulumi/pulumi-yaml/pull/357)

- Warn on non camelCase names.
  [#362](https://github.com/pulumi/pulumi-yaml/pull/362)

- Recognize the new core project-level `config` block.
  [#369](https://github.com/pulumi/pulumi-yaml/pull/369)

### Bug Fixes

- Allow interpolations for `AssetOrArchive` function values
  [#341](https://github.com/pulumi/pulumi-yaml/pull/341)

- Clarify the lifetimes when calling `codegen.Eject`. This is a breaking change to the
  `codegen.Eject` API.
  [#358](https://github.com/pulumi/pulumi-yaml/pull/358)

- Quote generated strings that could be numbers.
  [#363](https://github.com/pulumi/pulumi-yaml/issues/363)

- Respect import option on resource.
  [#367](https://github.com/pulumi/pulumi-yaml/issues/367)

- Discover Invokes during `GetReferencedPlugins`.
  [#381](https://github.com/pulumi/pulumi-yaml/pull/381)

- Escaped interpolated strings now remove one extra dollar sign.
  [#382](https://github.com/pulumi/pulumi-yaml/pull/382)

- Only insert "id" in ejected resource refs when the receiver type is a string.
  [#389](https://github.com/pulumi/pulumi-yaml/pull/389)

## 0.5.3 (2022-07-12)

### Improvements

- Allow lowercase `type` on config entries.
  [#275](https://github.com/pulumi/pulumi-yaml/pull/275)

- Prevent errors from cascading.
  [#258](https://github.com/pulumi/pulumi-yaml/pull/258)

- Health checks for pulumi-language-yaml.
  [#277](https://github.com/pulumi/pulumi-yaml/pull/277)
- Move Pulumi YAML specification to the [Pulumi
  documentation](https://www.pulumi.com/docs/reference/yaml). [#261](https://github.com/pulumi/pulumi-yaml/pull/261)

### Bug Fixes

- Warn when using the reserved prefix `Fn::` as a map key.
  [#272](https://github.com/pulumi/pulumi-yaml/pull/272)

## 0.5.2 (2022-06-02)

### Improvements

- Fix `pulumi convert` panicking on programs containing `Fn::ToJSON`.
  [#250](https://github.com/pulumi/pulumi-yaml/pull/250)

- Fix `pulumi convert` panicking on programs containing a `Fn::Invoke` with an empty arguments
  property.
  [#262](https://github.com/pulumi/pulumi-yaml/pull/262)

- Fix `pulumi convert` panicking on programs containing `Fn::Secret`.
  [#260](https://github.com/pulumi/pulumi-yaml/pull/260)

### Bug Fixes

- Handle token types in the type checker.
  [#248](https://github.com/pulumi/pulumi-yaml/pull/248)

## 0.5.1 (2022-06-02)

### Improvements

- Update pulumi/pulumi to v3.32.1

- Add errors when hanging invalid fields off of resources.
  [#203](https://github.com/pulumi/pulumi-yaml/pull/203)

- Add errors when hanging invalid fields off of resource options.
  [#211](https://github.com/pulumi/pulumi-yaml/pull/211)

- Add a type checker.
  [#228](https://github.com/pulumi/pulumi-yaml/pull/228)

- Add `Fn::FromBase64`
  [#218](https://github.com/pulumi/pulumi-yaml/pull/218)

- Add support for Fn::ReadFile, enabling [Stack README](https://www.pulumi.com/blog/stack-readme/) support.
  [#217](https://github.com/pulumi/pulumi-yaml/pull/217)

- Allow Fn::Join to take expressions as inputs, previously the second argument had to be a syntactical list.
  [#241](https://github.com/pulumi/pulumi-yaml/pull/241)

### Bug Fixes

- De-duplicate error message added during pre-eval checking.
  [#207](https://github.com/pulumi/pulumi-yaml/pull/207)

- Prevent invokes without inputs from crashing `pulumi-language-yaml`.
  [#216](https://github.com/pulumi/pulumi-yaml/pull/216)

- Allow Fn::ToBase64 to take expressions as inputs, was previously constrained to only allow a
  string constant.
  [#221](https://github.com/pulumi/pulumi-yaml/pull/221)

- [expr] Fix handling of "plain" input maps when sending properties to component providers such as AWSX.
  [#195](https://github.com/pulumi/pulumi-yaml/pull/195)

- Do not panic when converting functions without `Return` fields.
  [#233](https://github.com/pulumi/pulumi-yaml/pull/234)

- Handle token types in the type checker.
  [#248](https://github.com/pulumi/pulumi-yaml/pull/248)

## 0.3.0 (2022-05-03)

### Improvements

- [language] integrated support for using another program or script to generate YAML

- [CLI] full `pulumi convert` support including support for "compilers"

- [codegen] Docs generation

## 0.2.0 (2022-04-26)

### Improvements

- Finalized expression language and documented built-in functions (`Fn::` items).

- Simplified `configuration` key

- Code generation improvements for conversion to other languages

### Bug Fixes

- Fixed rendering of known resource outputs during preview, secret outputs

- Error on invalid resource and invoke calls

- Support for Kubernetes resource "kind" and "apiVersion" constants

- Improved error messages

## 0.1.0 (2022-03-25)

First preview release of YAML language support for Pulumi. See README for language specification.

### Improvements

- [ci] Enable CI suite, testing.

- [features] Resources may specify "pluginDownloadURL" to exercise the common API signature used
  across providers for dynamic plugin acquisition.

- [features] Fn::Invoke arguments may contain outputs from other resources

- [features] Fn::Asset supports FileArchive, RemoteArchive modes

- [features] variables top level item implemented, can use variables to store intermediates to
  simplify invokes or re-use values

- [features] built-in variable "pulumi", which is a map with a "cwd", "stack", and "project" to
  obtain the current working directory, stack name, and project name respectively.

- [features] optional `Return` from `Fn::Invoke`

- [features] an expression referring to a resource by name, such as `${resource}` returns the
  resource object instead of an individual resource. Resource IDs are now obtained via `id` property
  in expressions. Example: use `${resource.id}` instead of `${resource}`, implements
  [#73](https://github.com/pulumi/pulumi-yaml/issues/73). Also adds a `urn` property to obtain the
  resource's URN.

- [features] no longer need to specify `component` property on resources, instead this is determined
  by discovering the package schema and using the value declared there.

- [features] can use shorter resource types and function names against one of a couple patterns.
